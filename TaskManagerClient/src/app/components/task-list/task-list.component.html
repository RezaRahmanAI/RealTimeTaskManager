<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" role="list" aria-label="Task list">
  <div *ngFor="let task of tasks" class="bg-white p-4 rounded shadow" role="listitem">
    <h3 class="font-bold text-lg">{{ task.title }}</h3>
    <p class="text-gray-600">{{ task.description }}</p>
    <p><strong>Status:</strong> {{ task.status }}</p>
    <p><strong>Priority:</strong> {{ task.priority }}</p>
    <p><strong>Due:</strong> {{ task.dueDate | date: 'shortDate' }}</p>
    <p><strong>Project:</strong> {{ task.project?.name || 'N/A' }}</p>
    <div class="flex space-x-2 mt-2">
      <button mat-icon-button color="primary" (click)="editTask.emit(task)" aria-label="Edit task">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button color="warn" (click)="deleteTask(task.id)" aria-label="Delete task">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
    <!-- Comments -->
    <div class="mt-4">
      <mat-form-field class="w-full">
        <input matInput [(ngModel)]="newComment[task.id]" placeholder="Add comment" (keyup.enter)="addComment(task.id)" aria-label="Add comment">
      </mat-form-field>
      <ul class="mt-2" *ngIf="task.comments?.length">
        <li *ngFor="let comment of task.comments" class="text-sm text-gray-500">
          {{ comment.content }} ({{ comment.createdAt | date: 'short' }})
        </li>
      </ul>
    </div>
    <!-- Attachments -->
    <div class="mt-4">
      <input type="file" (change)="uploadFile(task.id, $event)" aria-label="Upload attachment for task">
      <ul class="mt-2" *ngIf="task.attachments?.length">
        <li *ngFor="let att of task.attachments">
          <a [href]="att.filePath" target="_blank" class="text-blue-500">{{ att.fileName }}</a>
        </li>
      </ul>
    </div>
  </div>
</div>